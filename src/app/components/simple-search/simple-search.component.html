<div class="container">
<div class="leftside">
  <div>
  <mat-form-field>
    <textarea #nameField matInput [(ngModel)] = "nameInput" placeholder="Name"></textarea>
  </mat-form-field>
  <mat-form-field>
    <textarea #lastNameField matInput [(ngModel)] = "lastNameInput" placeholder="Last Name"></textarea>
  </mat-form-field>
  </div>
  <hr>
  <mat-form-field>
    <textarea #fathersField matInput [(ngModel)] = "fathersNameInput" placeholder="Father's Name"></textarea>
  </mat-form-field>

  <mat-form-field>
    <mat-select #townField [(ngModel)] = "townInput" placeholder="Origin">
      <mat-option *ngFor="let val of townList" [value]="val">{{val}}</mat-option>
    </mat-select>
  </mat-form-field>
  <hr>
  <mat-form-field>
    <input #arrivalField matInput type = "number" [ngModel] = "arrivalInput > 0 ? arrivalInput : ''" (ngModelChange)="arrivalInput = $event" placeholder="Arrival Year">
  </mat-form-field>
  <mat-form-field>
    <mat-select #precisionField [(ngModel)] = "precisionInput" placeholder="Precision">
      <mat-option value = "0">Exact</mat-option>
      <mat-option value = "1">+/- 1 year</mat-option>
      <mat-option value = "2">+/- 2 years</mat-option>
      <mat-option value = "5">+/- 5 years</mat-option>
    </mat-select>
  </mat-form-field>
  <hr>
  <div *ngFor ="let relative of relativeInput; let i = index; trackBy: trackByFn">
    <ng-container *ngTemplateOutlet="relativeName; context: {id: i}">

    </ng-container>
    <hr>
  </div>
  <hr>
  <div class="button-div">
    <button mat-raised-button color="primary" (click)="addRelative()" class="myButton">Add Relative</button>
  </div>
  <div class="button-div">
    <button mat-raised-button color="primary" (click)="fireSearch()">Search</button>
  </div>
</div>
  <div *ngIf = "this.countRes >= 0 && results.length > 0 "class="rightside">
    <p>Count found: {{this.countRes}}</p>
  <table>
    <tr>
      <td>Name</td>
      <td>Last Name</td>
      <td>Father's Name</td>
      <td>Origin</td>

    </tr>
    <tr *ngFor="let result of results" (click)="resultClicked(result.iri)">
      <td>{{getString(result.names)}}</td>
      <td>{{getString(result.lastNames)}}</td>
      <td>{{getString(result.fathersNames)}}</td>
      <td>{{getString(result.towns)}}</td>
    </tr>
  </table>
    <div class="button-div">
      <button mat-raised-button color="primary" (click) = "changePage(-1)">Previous</button>
    </div>
    <div class="button-div">
      <button mat-raised-button color="primary" (click) = "changePage(1)">Next</button>
    </div>
  </div>
</div>
<ng-template #relativeName let-id="id">
  <mat-form-field>
    <textarea matInput [(ngModel)] = "relativeInput[id]" placeholder="Relative name"></textarea>
  </mat-form-field>
  <div class="button-div">
    <button mat-raised-button #removeRelativeButton color="primary" (click) = "removeRelative(id)">Remove this relative</button>
  </div>
</ng-template>
